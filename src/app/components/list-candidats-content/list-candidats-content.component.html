<!--
  ~ Copyright (c) 29/07/2022 08:27
  ~ @author Ronald Tchuekou
  ~ @email ronaldtchuekou@gmail.com
  -->

<div class='flex-none flex flex-row items-end border-b'>
  <div class='grid grid-cols-3 gap-3 w-full pt-3 px-3 pb-2'>
    <label class='block text-xs text-gray-600 w-full'>
      <span class='block pb-1'>Candidat</span>
      <input
        [(ngModel)]='candidate_name'
        class='border rounded w-full bg-transparent text-xs text-black py-1 px-2 focus:outline-none focus:ring-transparent'
        placeholder='Nom du candidat...'
        type='text'
      >
    </label>
    <app-input-select
      [(value)]='filiere'
      [content]='filieres'
      label='Filières'></app-input-select>
    <app-input-select
      [(value)]='option'
      [content]='options'
      label='Options'></app-input-select>
  </div>
  <button
    (click)='filterContent()'
    class='flex justify-center items-center bg-blue-600 rounded h-7 w-7 text-white flex-none mr-3 my-2'
    matRipple
    matRippleColor='rgba(255, 255, 255, 0.15)'>
    <mat-icon>search</mat-icon>
  </button>
</div>
<div class='h-full overflow-y-auto'>
  <table *ngIf='!loading && content.length > 0' class='table w-full text-xs text-gray-500'>
    <thead class='bg-gray-200 text-gray-600'>
    <td class='p-2'>Nom complet</td>
    <td class='p-2'>Téléphone</td>
    <td class='p-2'>Email</td>
    <td class='w-5'></td>
    </thead>
    <tbody>
    <ng-container *ngFor='let item of pages[currentPage - 1]'>
      <tr
        (click)='currentCandidateChange.emit(item)'
        [class.bg-orange-100]='currentCandidate && currentCandidate.id === item.id'
        class='border-b px-2'>
        <td class='p-2'>{{item.nom}} {{item.prenom}}</td>
        <td class='p-2'>{{item.telephone}}</td>
        <td class='p-2'>{{item.email}}</td>
        <td class='py-2 px-4'>
          <input [checked]='item.pass' class='rounded' type='checkbox'>
        </td>
      </tr>
    </ng-container>
    </tbody>
  </table>
  <app-empty-state
    *ngIf='!loading && content.length === 0'
    text='Pas de liste candidats chargée'></app-empty-state>
  <app-loader-content *ngIf='loading'></app-loader-content>
</div>
<div class='flex-none border-t flex flex-row justify-between items-center'>
  <div class='flex flex-row space-x-2'>
    <button
      class='button warning'
      matRipple
      matRippleColor='rgba(255, 255, 255, 0.15)'>
      Exporter
      <mat-icon>arrow_drop_down</mat-icon>
    </button>
    <button
      (click)='deleteAll()'
      class='button red py-2'
      matRipple
      matRippleColor='rgba(255, 255, 255, 0.15)'>
      Supprimer
    </button>
  </div>
  <div class='flex flex-row items-center space-x-3'>
    <div class='text-gray-400 text-sm'>page {{currentPage}} / {{pages.length}}</div>
    <select
      (ngModelChange)='limitChange($event)'
      [ngModel]='limit'
      class='border text-xs rounded w-20 py-1 text-gray-400'>
      <option [value]='50'>50</option>
      <option [value]='100'>100</option>
      <option [value]='150'>150</option>
      <option [value]='200'>200</option>
    </select>
    <button
      (click)='previousPage()'
      class='text-gray-400'
      mat-icon-button>
      <mat-icon>navigate_before</mat-icon>
    </button>
    <button
      (click)='nextPage()'
      class='text-gray-400'
      mat-icon-button>
      <mat-icon>navigate_next</mat-icon>
    </button>
  </div>
</div>

<!--
  ~ Copyright (c) 29/07/2022 04:18
  ~ @author Ronald Tchuekou
  ~ @email ronaldtchuekou@gmail.com
  -->

<div class='flex flex-col w-full h-full relative'>
  <input
    #csv_file_input
    (change)='onCSVInputChange($event)'
    accept='application/csv'
    class='absolute invisible'
    type='file'>
  <div class='flex-none flex flex-row justify-between items-center'>
    <div class='title flex-none'>Candidats de la dernière liste chargée</div>
    <div class='flex flex-row'>
      <button
        (click)='choseCSVFile()'
        class='button green py-2'
        matRipple
        matRippleColor='rgba(255, 255, 255, 0.15)'>
        <span class='block px-2 py-1'>Importer</span>
      </button>
      <button
        (click)='listCandidatsContentComponent.export()'
        class='button warning py-2'
        matRipple
        matRippleColor='rgba(255, 255, 255, 0.15)'>
        <span class='block px-2 py-1'>Exporter</span>
      </button>
    </div>
  </div>
  <div class='container h-full flex flex-row' style='padding: 0; height: calc(100vh - 140px)'>
    <div class='w-full h-full border-r'>
      <app-list-candidats-content
        #listCandidatsContentComponent
        [(currentCandidate)]='currentCandidate'
      ></app-list-candidats-content>
    </div>
    <div class='flex-none h-full max-w-[500px] md:min-w-[500px]'>
      <mat-tab-group
        *ngIf='!loading'
        [selectedIndex]='tab_index'
        class='hidden-nav-tab h-full'>
        <mat-tab label='Details'>
          <app-candidate-details
            (onDeleteClick)='deleteCurrent()'
            (onEditClick)='tab_index = 1'
            [currentCandidate]='currentCandidate'
            [departments]='this.departments'
            [diplomes]='diplomes'
            [filieres]='this.filieres'
            [options]='this.options'
            [regions]='this.regions'
          ></app-candidate-details>
        </mat-tab>
        <mat-tab label='Form editor'>
          <app-candidate-form
            (onBackClick)='tab_index = 0'
            [currentCandidate]='currentCandidate'
            [departments]='this.departments'
            [diplomes]='diplomes'
            [filieres]='this.filieres'
            [options]='this.options'
            [regions]='this.regions'
          ></app-candidate-form>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>

<app-loader-context [loading]='file_loading'></app-loader-context>
